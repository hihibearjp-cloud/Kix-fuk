<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#FFF5F7">
    <title>å®‰å¦®äºæ—…äººæ‰‹å¸³</title>
    
    <!-- 1. è¼‰å…¥æ ¸å¿ƒåº« (ä½¿ç”¨æœ€ç©©å®šçš„ unpkg) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@500;800;900&display=swap" rel="stylesheet">

    <style>
        /* iOS å°ˆç”¨å„ªåŒ– */
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background-color: #FFF0F5;
            margin: 0;
            padding: 0;
            overflow: hidden; /* é˜²æ­¢æ•´é«”å›å½ˆ */
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
        }

        /* 3D æŒ‰éˆ• */
        .btn-3d {
            transition: transform 0.1s, border-bottom-width 0.1s;
            border-bottom-width: 5px;
            transform: translateY(0);
        }
        .btn-3d:active {
            border-bottom-width: 0px;
            transform: translateY(5px);
        }

        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .card-pop {
            background: white;
            border: 2px solid #333;
            box-shadow: 4px 4px 0px rgba(0,0,0,0.15);
            border-radius: 1rem;
        }

        /* å®‰å…¨å€åŸŸè¨­å®š */
        .pt-safe { padding-top: env(safe-area-inset-top); }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
    </style>
</head>
<body>

    <!-- éŒ¯èª¤é¡¯ç¤ºå€ (è‹¥ React å´©æ½°æœƒé¡¯ç¤ºé€™è£¡) -->
    <div id="fallback-ui" style="display:none; padding:20px; text-align:center; color:#B91C1C; background:#FEF2F2; height:100vh;">
        <h2 style="font-size:24px; font-weight:bold; margin-bottom:10px;">ğŸ¥œ å“‡åº«å“‡åº«...å¤±æ•—äº†</h2>
        <p>ç¨‹å¼è¼‰å…¥ç™¼ç”Ÿå•é¡Œï¼Œè«‹æˆªåœ–çµ¦é–‹ç™¼è€…ã€‚</p>
        <div id="error-details" style="text-align:left; font-family:monospace; background:white; padding:10px; margin-top:20px; border-radius:8px; border:1px solid #ccc; font-size:12px;"></div>
    </div>

    <div id="root"></div>

    <script>
        // å…¨å±€éŒ¯èª¤æ””æˆª
        window.onerror = function(msg, url, line, col, error) {
            const root = document.getElementById('root');
            if(!root.innerHTML.trim()) { // åªæœ‰ç•¶ç•«é¢æ˜¯ç™½çš„æ™‚å€™æ‰é¡¯ç¤ºéŒ¯èª¤
                document.getElementById('fallback-ui').style.display = 'block';
                document.getElementById('error-details').innerText = `Error: ${msg}\nLine: ${line}`;
            }
            return false;
        };
    </script>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // --- å®‰å…¨å„²å­˜ Hook (è§£æ±º iOS ç§å¯†ç€è¦½å•é¡Œ) ---
        const useSafeStorage = (key, initialValue) => {
            const [storedValue, setStoredValue] = useState(() => {
                try {
                    const item = window.localStorage.getItem(key);
                    return item ? JSON.parse(item) : initialValue;
                } catch (error) {
                    console.warn(`localStorage access failed for ${key}, using memory.`);
                    return initialValue;
                }
            });

            const setValue = (value) => {
                try {
                    const valueToStore = value instanceof Function ? value(storedValue) : value;
                    setStoredValue(valueToStore);
                    window.localStorage.setItem(key, JSON.stringify(valueToStore));
                } catch (error) {
                    // Ignore write errors
                }
            };
            return [storedValue, setValue];
        };

        // --- å®‰å…¨åœ–æ¨™å…ƒä»¶ ---
        const Icon = ({ name, size = 20, className = "", color }) => {
            if (!window.lucide || !window.lucide.icons) return <span>?</span>;
            const LucideIcon = window.lucide.icons[name];
            return LucideIcon ? <LucideIcon size={size} className={className} color={color} /> : null;
        };

        // --- å®‰å¦®äºæŒ‰éˆ• ---
        const AnyaButton = ({ onClick, children, bg = "bg-pink-400", border = "border-pink-600", className = "" }) => (
            <button onClick={onClick} className={`${bg} ${border} ${className} btn-3d text-white font-black rounded-2xl border-solid shadow-md flex items-center justify-center p-3`}>
                {children}
            </button>
        );

        // --- ä¸»ç¨‹å¼ ---
        function App() {
            // åˆå§‹ç‹€æ…‹ï¼šä¸é–‹å•Ÿä»»ä½• Modal
            const [activeTab, setActiveTab] = useState('schedule');
            const [showSettings, setShowSettings] = useState(false);
            const [showImport, setShowImport] = useState(false);
            
            // è³‡æ–™ (ä½¿ç”¨å®‰å…¨å„²å­˜)
            const [schedule, setSchedule] = useSafeStorage('anya_sch', []);
            const [transactions, setTransactions] = useSafeStorage('anya_tx', []);
            const [shopping, setShopping] = useSafeStorage('anya_shop', []);
            const [diary, setDiary] = useSafeStorage('anya_diary', {});
            const [photos, setPhotos] = useSafeStorage('anya_img', {});
            
            // è¨­å®š
            const [tripDays, setTripDays] = useSafeStorage('anya_days', ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5']);
            const [budget, setBudget] = useSafeStorage('anya_budget', 50000);

            // UI ç‹€æ…‹
            const [dayIndex, setDayIndex] = useState(0);
            const currentDay = tripDays[dayIndex] || 'Day 1';

            // è¼¸å…¥æ¬„ä½
            const [inputTx, setInputTx] = useState({ amt: '', desc: '', note: '', cat: 'é£²é£Ÿ', curr: 'JPY' });
            const [inputEv, setInputEv] = useState({ time: '', title: '', cost: '' });
            const [importText, setImportText] = useState('');
            const [diaryText, setDiaryText] = useState('');

            // ç•¶å¤©æ•¸åˆ‡æ›æ™‚ï¼ŒåŒæ­¥æ—¥è¨˜å…§å®¹
            useEffect(() => {
                setDiaryText(diary[currentDay] || "");
            }, [currentDay]);

            // è¨ˆç®—é ç®—
            const totalSpent = useMemo(() => {
                return transactions.reduce((acc, t) => {
                    const rate = t.curr === 'JPY' ? 0.215 : 1;
                    return acc + (parseFloat(t.amount) || 0) * rate;
                }, 0);
            }, [transactions]);
            
            const budgetPct = budget > 0 ? Math.min(100, Math.round((totalSpent / budget) * 100)) : 0;

            // --- åŠŸèƒ½å‡½æ•¸ ---

            const addTransaction = () => {
                if(!inputTx.amt || !inputTx.desc) return alert("è«‹è¼¸å…¥é‡‘é¡å’Œå“é …");
                const newTx = { id: Date.now(), ...inputTx, date: currentDay };
                setTransactions([newTx, ...transactions]);
                setInputTx({...inputTx, amt:'', desc:'', note:''});
            };

            const addSchedule = () => {
                if(!inputEv.title) return;
                const newEv = { 
                    id: Date.now(), 
                    day: currentDay, 
                    time: inputEv.time || '00:00',
                    title: inputEv.title,
                    cost: parseFloat(inputEv.cost) || 0
                };
                setSchedule([...schedule, newEv].sort((a,b)=>a.time.localeCompare(b.time)));
                setInputEv({ time:'', title:'', cost:'' });
            };

            const addShopItem = () => {
                const name = prompt("æƒ³è²·ä»€éº¼ï¼Ÿ");
                if(name) setShopping([...shopping, { id: Date.now(), item: name, done: false }]);
            };

            const loadDemo = () => {
                if(!confirm("è¼‰å…¥ç¯„ä¾‹æœƒæ¸…ç©ºç›®å‰è³‡æ–™ï¼Œç¢ºå®šå—ï¼Ÿ")) return;
                setSchedule([
                    {id:1, day:'Day 1', time:'10:00', title:'æŠµé”æ±äº¬ âœˆï¸', cost:2000},
                    {id:2, day:'Day 1', time:'18:00', title:'æ™´ç©ºå¡”æ™šé¤', cost:5000},
                ]);
                setTransactions([
                    {id:1, date:'Day 1', desc:'æ©Ÿç¥¨', amount:15000, curr:'TWD', cat:'äº¤é€š', note:'æ—©é³¥ç¥¨'},
                    {id:2, date:'Day 1', desc:'æ‹‰éºµ', amount:1200, curr:'JPY', cat:'é£²é£Ÿ', note:'å¥½åƒ'},
                ]);
                setShopping([
                    {id:1, item:'å‰ä¼Šå¡å“‡ç©å¶', done:false},
                    {id:2, item:'ç™½è‰²æˆ€äºº', done:true}
                ]);
                const demoDiary = {}; demoDiary['Day 1'] = 'ä»Šå¤©å¥½é–‹å¿ƒï¼Waku Waku!';
                setDiary(demoDiary);
                setShowSettings(false);
                alert("âœ¨ ç¯„ä¾‹è¼‰å…¥å®Œæˆï¼");
            };

            const clearData = () => {
                if(confirm("ç¢ºå®šæ¸…ç©ºæ‰€æœ‰è³‡æ–™ï¼Ÿ")) {
                    setSchedule([]); setTransactions([]); setShopping([]); setDiary({}); setPhotos({});
                    setShowSettings(false);
                }
            };

            const handlePhoto = (e) => {
                const file = e.target.files[0];
                if(file) {
                    const reader = new FileReader();
                    reader.onload = () => setPhotos({...photos, [currentDay]: reader.result});
                    reader.readAsDataURL(file);
                }
            };

            const handleImport = () => {
                if(!importText) return;
                const items = importText.split('\n').filter(x=>x.trim()).map(x=>({id:Date.now()+Math.random(), item:x, done:false}));
                setShopping([...shopping, ...items]);
                setImportText(''); setShowImport(false);
            };

            const saveDiary = () => {
                setDiary({...diary, [currentDay]: diaryText});
                alert("æ—¥è¨˜å·²ä¿å­˜ï¼");
            };

            // --- ç•«é¢æ¸²æŸ“ ---
            return (
                <div className="flex flex-col h-[100dvh] w-full bg-[#FFF8E7] text-gray-800 font-bold overflow-hidden">
                    
                    {/* Header */}
                    <div className="pt-safe bg-[#FFD1DC] border-b-4 border-black px-4 py-3 z-30 shadow-md flex-none">
                        <div className="flex justify-between items-center max-w-md mx-auto">
                            <h1 className="text-xl font-black flex items-center gap-2">
                                <span className="bg-white border-2 border-black rounded-full p-1"><Icon name="Gift" className="text-pink-500"/></span>
                                å®‰å¦®äºæ‰‹å¸³
                            </h1>
                            <button onClick={()=>setShowSettings(true)} className="bg-white border-2 border-black rounded-xl p-2 btn-3d"><Icon name="Settings"/></button>
                        </div>
                    </div>

                    {/* Nav Bar */}
                    <div className="bg-white border-b-4 border-black px-2 py-2 z-20 flex-none">
                        <div className="max-w-md mx-auto grid grid-cols-4 gap-2">
                            {[
                                {id:'schedule', label:'è¡Œç¨‹', icon:'Map', color:'bg-teal-400'},
                                {id:'shopping', label:'è³¼ç‰©', icon:'ShoppingBag', color:'bg-yellow-400'},
                                {id:'accounting', label:'è¨˜å¸³', icon:'Wallet', color:'bg-pink-400'},
                                {id:'diary', label:'æ—¥è¨˜', icon:'BookHeart', color:'bg-purple-400'},
                            ].map(t => (
                                <button key={t.id} onClick={()=>setActiveTab(t.id)} 
                                    className={`flex flex-col items-center p-2 rounded-xl border-b-4 transition-all active:border-b-0 active:translate-y-1 ${activeTab===t.id ? `${t.color} text-white border-black shadow-md` : 'bg-gray-50 text-gray-400 border-transparent'}`}>
                                    <Icon name={t.icon} size={24} className="mb-1" />
                                    <span className="text-xs font-bold">{t.label}</span>
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Content */}
                    <main className="flex-1 overflow-y-auto p-4 pb-24 safe-bottom hide-scrollbar">
                        <div className="max-w-md mx-auto space-y-4">
                            
                            {/* --- TAB 1: è¡Œç¨‹ --- */}
                            {activeTab === 'schedule' && (
                                <div className="space-y-4">
                                    <div className="bg-[#E0F7FA] border-2 border-black rounded-2xl p-3 flex justify-between items-center shadow-md">
                                        <button onClick={()=>{const i=Math.max(0, dayIndex-1); setDayIndex(i); setCurrentDay(tripDays[i])}}><Icon name="ChevronLeft"/></button>
                                        <span className="text-xl font-black text-teal-800">{currentDay}</span>
                                        <button onClick={()=>{const i=Math.min(tripDays.length-1, dayIndex+1); setDayIndex(i); setCurrentDay(tripDays[i])}}><Icon name="ChevronRight"/></button>
                                    </div>

                                    <div className="bg-white border-2 border-black rounded-2xl p-4 card-pop space-y-2">
                                        <div className="flex gap-2">
                                            <input type="time" value={inputEv.time} onChange={e=>setInputEv({...inputEv, time:e.target.value})} className="bg-gray-100 rounded-lg p-2 w-28 font-bold border-2 border-transparent focus:border-black outline-none"/>
                                            <input type="text" value={inputEv.title} onChange={e=>setInputEv({...inputEv, title:e.target.value})} placeholder="å»å“ªç©?" className="bg-gray-100 rounded-lg p-2 flex-1 font-bold border-2 border-transparent focus:border-black outline-none"/>
                                        </div>
                                        <div className="flex gap-2">
                                            <input type="number" value={inputEv.cost} onChange={e=>setInputEv({...inputEv, cost:e.target.value})} placeholder="é ç®—(Â¥)" className="bg-gray-100 rounded-lg p-2 flex-1 font-bold border-2 border-transparent focus:border-black outline-none"/>
                                            <AnyaButton onClick={addSchedule} bg="bg-teal-500" border="border-teal-700" className="px-4"><Icon name="Plus"/></AnyaButton>
                                        </div>
                                    </div>

                                    <div className="space-y-3 relative pl-4">
                                        <div className="absolute left-8 top-0 bottom-0 w-1 bg-teal-200"></div>
                                        {schedule.filter(s=>s.day===currentDay).map(s => (
                                            <div key={s.id} className="relative pl-10">
                                                <div className="absolute left-0 top-4 w-5 h-5 bg-teal-400 border-2 border-black rounded-full z-10"></div>
                                                <div className="bg-white border-2 border-black rounded-xl p-3 card-pop relative">
                                                    <button onClick={()=>setSchedule(schedule.filter(x=>x.id!==s.id))} className="absolute top-2 right-2 text-gray-300"><Icon name="Trash2" size={16}/></button>
                                                    <span className="bg-teal-100 text-teal-800 text-xs px-2 py-0.5 rounded font-black">{s.time}</span>
                                                    <div className="text-lg font-black mt-1">{s.title}</div>
                                                    {s.cost > 0 && <div className="text-yellow-600 text-sm font-bold">Â¥ {s.cost}</div>}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {/* --- TAB 2: è³¼ç‰© --- */}
                            {activeTab === 'shopping' && (
                                <div className="space-y-4">
                                    <div className="bg-[#FFF9C4] border-2 border-black rounded-2xl p-4 card-pop text-center">
                                        <div className="text-yellow-800 font-black flex items-center justify-center gap-2 mb-2"><Icon name="ShoppingBag"/> è³¼ç‰©é€²åº¦</div>
                                        <div className="w-full bg-white h-4 rounded-full border-2 border-black overflow-hidden relative">
                                            <div className="bg-yellow-400 h-full transition-all" style={{width: `${shopping.length ? (shopping.filter(i=>i.done).length/shopping.length)*100 : 0}%`}}></div>
                                        </div>
                                        <div className="text-right text-xs mt-1">{shopping.filter(i=>i.done).length} / {shopping.length}</div>
                                    </div>

                                    <div className="flex gap-2">
                                        <AnyaButton onClick={()=>setShowImport(true)} bg="bg-yellow-400" border="border-yellow-600" className="flex-1 py-3 text-sm"><Icon name="FileText" className="mr-1"/> æ–‡å­—åŒ¯å…¥</AnyaButton>
                                        <AnyaButton onClick={addShopItem} bg="bg-orange-400" border="border-orange-600" className="flex-1 py-3 text-sm"><Icon name="Plus" className="mr-1"/> æ‰‹å‹•æ–°å¢</AnyaButton>
                                    </div>

                                    <div className="space-y-2 pb-10">
                                        {shopping.map(s => (
                                            <div key={s.id} className={`bg-white border-2 border-black rounded-xl p-3 flex justify-between items-center card-pop ${s.done?'opacity-50':''}`}>
                                                <span className={`font-bold ${s.done?'line-through':''}`}>{s.item}</span>
                                                <div className="flex gap-2">
                                                    <button onClick={()=>setShopping(shopping.map(i=>i.id===s.id?{...i, done:!i.done}:i))} className={`w-8 h-8 rounded border-2 border-black flex items-center justify-center ${s.done?'bg-green-400':'bg-white'}`}><Icon name="CheckCircle" color={s.done?'white':'black'}/></button>
                                                    <button onClick={()=>setShopping(shopping.filter(i=>i.id!==s.id))} className="text-gray-400"><Icon name="Trash2"/></button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {/* --- TAB 3: è¨˜å¸³ --- */}
                            {activeTab === 'accounting' && (
                                <div className="space-y-4">
                                    <div className="bg-[#F8BBD0] border-4 border-white rounded-[2rem] p-4 shadow-lg flex items-center justify-between">
                                        <div className="relative w-20 h-20 flex items-center justify-center bg-white rounded-full border-4 border-pink-300">
                                            <span className="font-black text-pink-500 text-lg">{budgetPct}%</span>
                                        </div>
                                        <div className="text-right">
                                            <div className="text-xs font-black text-pink-800">å‰©é¤˜é ç®—</div>
                                            <div className="text-2xl font-black text-white drop-shadow-md">NT$ {budget - totalSpent}</div>
                                        </div>
                                    </div>

                                    <div className="bg-white border-2 border-black rounded-2xl p-4 card-pop space-y-3">
                                        <div className="flex gap-2">
                                            <input type="number" value={inputTx.amt} onChange={e=>setInputTx({...inputTx, amt:e.target.value})} placeholder="é‡‘é¡" className="flex-1 bg-gray-100 p-3 rounded-xl font-black text-xl outline-none"/>
                                            <select value={inputTx.curr} onChange={e=>setInputTx({...inputTx, curr:e.target.value})} className="bg-gray-100 rounded-xl font-bold px-2 outline-none">
                                                <option value="JPY">JPY</option><option value="TWD">TWD</option><option value="USD">USD</option>
                                            </select>
                                        </div>
                                        <input type="text" value={inputTx.desc} onChange={e=>setInputTx({...inputTx, desc:e.target.value})} placeholder="å“é …" className="w-full bg-gray-100 p-3 rounded-xl font-bold outline-none"/>
                                        <AnyaButton onClick={addTransaction} className="w-full py-3 text-lg"><Icon name="Camera" className="mr-2"/> è¨˜ä¸€ç­†</AnyaButton>
                                    </div>

                                    <div className="space-y-2 pb-10">
                                        {transactions.map(t => (
                                            <div key={t.id} className="bg-white border-2 border-gray-100 p-3 rounded-xl flex justify-between items-center shadow-sm">
                                                <div className="flex gap-3 items-center">
                                                    <div className="bg-pink-100 p-2 rounded-lg text-xl">ğŸ’°</div>
                                                    <div><div className="font-bold">{t.desc}</div><div className="text-xs text-gray-400">{t.cat}</div></div>
                                                </div>
                                                <div className="text-right">
                                                    <div className="font-black text-pink-500">{t.curr} {t.amount}</div>
                                                    <button onClick={()=>setTransactions(transactions.filter(x=>x.id!==t.id))} className="text-gray-300 mt-1"><Icon name="Trash2" size={14}/></button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {/* --- TAB 4: æ—¥è¨˜ --- */}
                            {activeTab === 'diary' && (
                                <div className="space-y-4 h-full flex flex-col">
                                    <div className="bg-[#B39DDB] border-2 border-black p-2 rounded-xl text-center text-white font-black shadow-md">{currentDay} çš„å›æ†¶</div>
                                    
                                    <div className="bg-white border-4 border-black p-2 rounded-2xl shadow-lg relative h-48 bg-gray-100 flex items-center justify-center overflow-hidden">
                                        {photos[currentDay] ? <img src={photos[currentDay]} className="w-full h-full object-cover"/> : <div className="flex flex-col items-center text-gray-400"><Icon name="Camera" size={32}/><span className="text-xs">æ›å°é¢</span></div>}
                                        <input type="file" accept="image/*" className="absolute inset-0 opacity-0 cursor-pointer" onChange={handlePhoto} />
                                    </div>

                                    <textarea 
                                        className="flex-1 bg-white border-2 border-black rounded-2xl p-4 text-lg font-bold resize-none outline-none shadow-md min-h-[200px]" 
                                        placeholder="ä»Šå¤©ç™¼ç”Ÿäº†ä»€éº¼äº‹ï¼Ÿ..." 
                                        value={diaryText} 
                                        onChange={e=>{setDiaryText(e.target.value);}}
                                    ></textarea>
                                    <AnyaButton onClick={saveDiary} bg="bg-purple-400" border="border-purple-600" className="w-full py-3">ä¿å­˜æ—¥è¨˜</AnyaButton>
                                </div>
                            )}
                        </div>
                    </main>

                    {/* --- æ¨¡æ…‹è¦–çª—: è¨­å®š --- */}
                    {showSettings && (
                        <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onClick={()=>setShowSettings(false)}>
                            <div className="bg-white w-full max-w-sm rounded-[2rem] p-6 border-4 border-black shadow-2xl space-y-4" onClick={e=>e.stopPropagation()}>
                                <div className="flex justify-between items-center"><h2 className="text-2xl font-black">è¨­å®š</h2><button onClick={()=>setShowSettings(false)}><Icon name="X"/></button></div>
                                <div>
                                    <label className="font-bold block mb-1">ç¸½é ç®— (NT$)</label>
                                    <input type="number" value={budget} onChange={e=>setBudget(e.target.value)} className="w-full border-2 border-black rounded-xl p-2 font-bold"/>
                                </div>
                                <div className="pt-2 flex gap-2 flex-col">
                                    <button onClick={loadDemo} className="w-full py-3 bg-yellow-300 border-2 border-black rounded-xl font-black shadow-md">åŒ¯å…¥ç¯„ä¾‹è³‡æ–™</button>
                                    <button onClick={clearData} className="w-full py-3 bg-red-100 text-red-500 border-2 border-red-300 rounded-xl font-black">æ¸…ç©ºè³‡æ–™</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* --- æ¨¡æ…‹è¦–çª—: åŒ¯å…¥ --- */}
                    {showImport && (
                        <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onClick={()=>setShowImport(false)}>
                            <div className="bg-white w-full max-w-sm rounded-[2rem] p-6 border-4 border-black shadow-2xl space-y-4" onClick={e=>e.stopPropagation()}>
                                <h2 className="text-xl font-black text-yellow-600">åŒ¯å…¥æ¸…å–®</h2>
                                <textarea value={importText} onChange={e=>setImportText(e.target.value)} className="w-full h-32 border-2 border-black rounded-xl p-2 font-bold" placeholder="è²¼ä¸Šæ–‡å­—ï¼Œä¸€è¡Œä¸€é …..."></textarea>
                                <div className="flex gap-2">
                                    <button onClick={()=>setShowImport(false)} className="flex-1 py-2 bg-gray-200 rounded-xl font-bold">å–æ¶ˆ</button>
                                    <AnyaButton onClick={handleImportShopping} bg="bg-yellow-400" border="border-yellow-600" className="flex-1">åŒ¯å…¥</AnyaButton>
                                </div>
                            </div>
                        </div>
                    )}

                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
